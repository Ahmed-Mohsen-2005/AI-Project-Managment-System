{% extends "base.html" %}

{% block title %}{{ t.reports }} - AIPMS{% endblock title %}

{% block extra_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reports.css') }}">
{% endblock extra_css %}

{% block content %}
    <div class="reports-container">
        
        <!-- Reports Header and Controls -->
        <header class="reports-header">
            <h1 class="page-title"><i class="fas fa-chart-line"></i> {{ t.analytics_reporting }}</h1>
            <div class="reports-controls">
                
                <div class="control-group">
                    <label for="report-type-select">{{ t.report_type }}</label>
                    <select id="report-type-select" class="filter-select">
                        <option value="summary">{{ t.executive_summary }}</option>
                        <option value="velocity">{{ t.sprint_velocity }}</option>
                        <option value="risk">{{ t.predictive_risk }}</option>
                        <option value="rca">{{ t.root_cause_analysis }}</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="project-filter">{{ t.project }}</label>
                    <select id="project-filter" class="filter-select">
                        <option value="1">Core Backend Initiative</option>
                        <option value="2">Frontend UI Revamp</option>
                        <option value="all">{{ t.portfolio_view }}</option>
                    </select>
                </div>
                
                <button id="export-report-btn" class="btn btn-secondary"><i class="fas fa-download"></i> {{ t.export_pdf }}</button>
            </div>
        </header>

        <!-- Main Reports Grid -->
        <div class="reports-grid">
            
            <!-- Widget 1: Report Display / AI Output -->
            <div class="card report-output-widget">
                <h2 class="widget-title" id="report-output-title">{{ t.executive_summary_ai }}</h2>
                
                <div id="ai-summary-output" class="ai-report-box scrollable-content">
                    <p class="loading-message">{{ t.select_report }}</p>
                </div>
                
                <button id="generate-report-btn" class="btn btn-primary btn-styled full-width-btn mt-md"><i class="fas fa-microchip"></i> {{ t.generate_report }}</button>
            </div>
            
            <!-- Widget 2: Visualization / Chart Area -->
            <div class="card chart-area-widget">
                <h2 class="widget-title" id="chart-title">{{ t.velocity_chart }}</h2>
                <div id="chart-visualization" class="chart-visualization-placeholder">
                    <img src="https://placehold.co/400x300/e6e9ee/2c3e50?text=Chart+Visualization+Area" alt="Chart Placeholder">
                </div>
            </div>

            <!-- Widget 3: Key Data Points / RCA Details -->
            <div class="card metrics-details-widget">
                <h2 class="widget-title">{{ t.key_metrics }}</h2>
                <ul id="analysis-details-list" class="analysis-list">
                    <!-- Metrics loaded by JS -->
                </ul>
            </div>

        </div>
    </div>
{% endblock content %}

{% block extra_js %}
    <script src="{{ url_for('static', filename='js/reports.js') }}"></script>
{% endblock extra_js %}