{% extends "base.html" %}

{% block title %}{{ t.profile }} - AIPMS{% endblock title %}

{% block extra_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock extra_css %}

{% block content %}
    <div class="profile-container">
        
        <!-- Profile Header Card -->
        <div class="card profile-header-card">
            <div class="profile-info-main">
                <img src="https://placehold.co/80x80/4a90e2/ffffff?text=J" alt="User Avatar" class="profile-avatar-large">
                <div class="profile-text-details">
                    <h1 class="page-title" id="user-name">{{ current_user_name }}</h1>
                    <p class="user-role" id="user-role">Project Manager (PM)</p>
                    <p class="user-email" id="user-email">{{ current_user_email }}</p>
                </div>
            </div>
            <div class="profile-actions">
                <button id="edit-profile-btn" class="btn btn-secondary"><i class="fas fa-edit"></i> {{ t.edit_profile }}</button>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="profile-content-grid">
            
            <!-- Column 1: AI Performance Metrics & Stats -->
            <div class="card stats-widget">
                <h2 class="widget-title"><i class="fas fa-chart-bar"></i> {{ t.performance_summary }}</h2>
                <div class="stats-grid">
                    
                    <div class="stat-item">
                        <p class="stat-value text-primary" id="user-velocity">100%</p>
                        <p class="stat-label">{{ t.avg_sprint_velocity }}</p>
                    </div>
                    <div class="stat-item">
                        <p class="stat-value text-warning" id="task-rejection">5%</p>
                        <p class="stat-label">{{ t.task_rejection_rate }}</p>
                    </div>
                    <div class="stat-item">
                        <p class="stat-value text-danger" id="risk-exposure">22%</p>
                        <p class="stat-label">{{ t.ai_risk_exposure }}</p>
                    </div>
                    <div class="stat-item">
                        <p class="stat-value text-success" id="tasks-completed">85</p>
                        <p class="stat-label">{{ t.tasks_completed }}</p>
                    </div>
                </div>
            </div>

            <!-- Column 2: Skill Management (FR-301) -->
            <div class="card skills-widget">
                <h2 class="widget-title"><i class="fas fa-tools"></i> {{ t.skill_set_management }}</h2>
                <div id="skills-list" class="skills-list">
                    <!-- Skills will be loaded and displayed here -->
                </div>
                
                <div class="skill-input-group">
                    <input type="text" id="new-skill-input" placeholder="e.g., Python, SQL Server, Vue.js">
                    <select id="skill-level-select">
                        <option value="3">{{ t.expert }}</option>
                        <option value="2">{{ t.proficient }}</option>
                        <option value="1">{{ t.familiar }}</option>
                    </select>
                    <button id="add-skill-btn" class="btn btn-primary btn-sm"><i class="fas fa-plus"></i> {{ t.add_skill }}</button>
                </div>
            </div>

            <!-- Column 3: Recent Activity Log -->
            <div class="card activity-widget full-span">
                <h2 class="widget-title"><i class="fas fa-history"></i> {{ t.recent_activity_log }}</h2>
                <ul id="activity-log" class="activity-log scrollable-list">
                    <!-- Activity entries loaded by JS -->
                </ul>
            </div>
        </div>
    </div>
{% endblock content %}

{% block extra_js %}
    <script src="{{ url_for('static', filename='js/profile.js') }}"></script>
{% endblock extra_js %}