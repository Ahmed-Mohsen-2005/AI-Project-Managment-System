# i18n.py
from flask import session

translations = {
    'en': {
        # ===== NAVIGATION & COMMON =====
        'aipms': 'AIPMS',
        'ai_project_management': 'AI Project Management System',
        'home': 'Home',
        'boards': 'Boards',
        'dashboard': 'Dashboard',
        'task_board': 'Task Board',
        'sprints': 'Sprints',
        'backlog': 'Backlog',
        'reports': 'Reports',
        'chats': 'Chats',
        'repos': 'Repos',
        'settings': 'Settings',
        'profile': 'Profile',
        'logout': 'Logout',
        'search_placeholder': 'Search tasks, projects, or users (Ctrl+K)...',
        'add_new': 'Add New',
        'notifications': 'Notifications',
        
        # ===== LOGIN/SIGNUP PAGE =====
        'log_in': 'Log In',
        'sign_up': 'Sign Up',
        'username_or_email': 'Username or Email',
        'password': 'Password',
        'remember_me': 'Remember Me',
        'forgot_password': 'Forgot Password?',
        'secure_login': 'Secure Log In',
        'or': 'or',
        'create_account': 'Create AIPMS Account',
        'email_address': 'Email Address',
        'full_name': 'Full Name',
        'min_8_chars': 'Min 8 chars',
        'terms_of_service': 'Terms of Service',
        'agree_terms': 'By signing up, you agree to the',
        
        # ===== SETTINGS PAGE =====
        'settings_title': 'Settings',
        'general': 'General',
        'security': 'Security',
        'integrations': 'Integrations',
        'ai_governance': 'AI Governance',
        
        # General Tab
        'general_app_settings': 'General Application Settings',
        'display_preferences': 'Display Preferences',
        'language': 'Language',
        'account_actions': 'Account Actions',
        'current_email': 'Current Email',
        'update_profile': 'Update Profile',
        'delete_account': 'Delete Account',
        
        # Security Tab
        'security_role_mgmt': 'Security & Role Management (Admin Only)',
        'authentication': 'Authentication',
        'two_factor_auth': 'Two-Factor Authentication (2FA)',
        'rbac': 'Role-Based Access Control (FR-201)',
        'manage_user_permissions': 'Manage User Permissions',
        'current_role': 'Current Role',
        'permission': 'Permission',
        'status': 'Status',
        'manage_budget': 'Manage Budget (FR-403)',
        'create_projects': 'Create Projects (FR-101)',
        'save_permissions': 'Save Permissions',
        
        # Integrations Tab
        'external_tools': 'External Tool Connections',
        'connected': 'Connected',
        'disconnected': 'Disconnected',
        'disconnect': 'Disconnect',
        'connect': 'Connect',
        
        # AI Governance Tab
        'ai_model_governance': 'AI Model & Governance (FR-508)',
        'model_information': 'Model Information',
        'active_model_version': 'Active Model Version',
        'last_training_date': 'Last Training Date',
        'ai_feature_controls': 'AI Feature Controls',
        'enable_predictive_risk': 'Enable Predictive Risk Scores (FR-203)',
        'enable_sentiment_analysis': 'Enable Sentiment Analysis (FR-503)',
        'audit_compliance': 'Audit & Compliance (FR-508)',
        'ai_decisions_logged': 'All AI decisions and model updates are logged and traceable.',
        'export_audit_log': 'Export AI Audit Log',
        
        # Notifications Tab
        'notification_channels': 'Notification Channels',
        'email_preferences': 'Email Preferences',
        'receive_email_alerts': 'Receive Email Alerts for P1 Tasks',
        'slack_configuration': 'Slack Configuration (Linked via Integration)',
        'alerts_sent_to': 'Alerts are currently sent to',
        'receive_swarm_alerts': 'Receive Alerts for Swarm Assignment (FR-202)',
        
        # ===== HOME PAGE / DASHBOARD =====
        'calendar': 'Calendar',
        'next_deadline': 'Next Deadline',
        'todo_list': 'To-do List',
        'add_task': 'Add Task',
        'notes': 'Notes',
        'team_tracker': 'Team Tracker',
        'summarize_updates': 'Summarize project updates...',
        'generate_summary': 'Generate Summary',
        'time_tracker': 'Time Tracker',
        'team': 'Team',
        'all_tasks': 'All Tasks',
        'task_name': 'Task Name',
        'assigned_to': 'Assigned To',
        'priority': 'Priority',
        'due_date': 'Due Date',
        'loading': 'Loading...',
        
        # ===== BOARDS PAGE =====
        'task_board': 'Task Board',
        'add_new_task': 'Add New Task',
        'todo': 'To Do',
        'in_progress': 'In Progress',
        'done': 'Done',
        'backlog_items': 'Backlog Items',
        'sprint_planning': 'Sprint Planning',
        'active_sprint': 'Active Sprint',
        'sprint_tasks': 'Sprint Tasks',
        
        # ===== REPORTS PAGE =====
        'reports': 'Reports',
        'project_summary': 'Project Summary',
        'team_performance': 'Team Performance',
        'task_completion': 'Task Completion',
        'velocity_chart': 'Velocity Chart',
        'export_report': 'Export Report',
        
        # ===== REPOSITORIES PAGE =====
        'repositories': 'Repositories',
        'repository_name': 'Repository Name',
        'last_commit': 'Last Commit',
        'branch': 'Branch',
        'clone': 'Clone',
        
        # ===== PROFILE PAGE =====
        'my_profile': 'My Profile',
        'user_information': 'User Information',
        'edit_profile': 'Edit Profile',
        'change_password': 'Change Password',
        'save_changes': 'Save Changes',
        'cancel': 'Cancel',
        
        # ===== BUTTONS & FORMS =====
        'save': 'Save',
        'submit': 'Submit',
        'delete': 'Delete',
        'edit': 'Edit',
        'close': 'Close',
        'confirm': 'Confirm',
        'back': 'Back',
        'next': 'Next',
        'previous': 'Previous',
        'yes': 'Yes',
        'no': 'No',
        'error': 'Error',
        'success': 'Success',
        'warning': 'Warning',
        'info': 'Info',
        'required_field': 'This field is required',
        'confirm_logout_message': 'Are you sure you want to end your session and log out of AIPMS?',
        
        # ===== PROFILE PAGE =====
        'performance_summary': 'Performance Summary (AI)',
        'avg_sprint_velocity': 'Avg. Sprint Velocity',
        'task_rejection_rate': 'Task Rejection Rate',
        'ai_risk_exposure': 'AI Risk Exposure',
        'tasks_completed': 'Tasks Completed (YTD)',
        'skill_set_management': 'Skill Set Management',
        'add_skill': 'Add',
        'expert': 'Expert',
        'proficient': 'Proficient',
        'familiar': 'Familiar',
        'recent_activity_log': 'Recent Activity Log',
        
        # ===== REPORTS PAGE =====
        'analytics_reporting': 'Analytics & Reporting Hub',
        'report_type': 'Report Type:',
        'executive_summary': 'Executive Summary (AI)',
        'sprint_velocity': 'Sprint Velocity History',
        'predictive_risk': 'Predictive Risk Forecast',
        'root_cause_analysis': 'Root Cause Analysis (RCA)',
        'portfolio_view': 'Portfolio View',
        'export_pdf': 'Export PDF',
        'executive_summary_ai': 'Executive Summary (AI Generated)',
        'select_report': 'Select a report type and project to generate data.',
        'generate_report': 'Generate Report',
        'key_metrics': 'Key Metrics & Analysis Details',
        
        # ===== CHATS PAGE =====
        'channels': 'Channels',
        'search_chats': 'Search chats or users...',
        'backend_devs': 'Backend-Devs',
        'frontend_ui': 'Frontend-UI',
        'ai_modeling': 'AI-Modeling',
        'ai_context': 'AI Context',
        'channel_sentiment': 'Channel Sentiment',
        'neutral_low_stress': 'Neutral/Low Stress',
        'avg_mood_score': 'Avg. mood score over last 24h.',
        'linked_work_items': 'Linked Work Items',
        'active': 'Active',
        'type_message': 'Type a message or use /command...',
        'invite_member': 'Invite Member',
        'view_details': 'View Details',
        
        # ===== REPOSITORIES PAGE =====
        'repositories_management': 'Repositories Management',
        'search_repositories': 'Search repositories...',
        'new_repository': 'New Repository',
        'connected_repositories': 'Connected Repositories',
        'last_updated': 'Last Updated',
        'owner': 'Owner',
        'loading_repositories': 'Loading repositories...',
        'github_integration': 'GitHub Integration',
        'connect_github': 'Connect to GitHub',
        'webhook_url': 'Webhook URL:',
        'copy': 'Copy',
        'default_notifications': 'Default Notifications:',
        'send_new_pr': 'Send on New PR',
        'send_merge_main': 'Send on Merge to main',
        'notify_ci_failure': 'Notify on CI failure',
        'slack_integration': 'Slack Integration',
        'manage_slack': 'Manage Slack notifications in',
        
        # ===== BOARD / KANBAN PAGE =====
        'kanban_board': 'Kanban Board',
        'quick_create_task': 'Quick Create Task',
        'under_review': 'Under Review',
        'medium': 'Medium',
        'high': 'High',
        'low': 'Low',
        'description': 'Description',
        'assignee': 'Assignee',
        'create_task': 'Create Task',
        
        # ===== BACKLOG PAGE =====
        'backlog_prioritization': 'Project Backlog & Prioritization',
        'sort_by': 'Sort By:',
        'ai_priority_score': 'AI Priority Score (Desc)',
        'manual_priority': 'Manual Priority (Desc)',
        'creation_date': 'Creation Date (Asc)',
        'add_backlog_item': 'Add Backlog Item',
        'backlog_id': 'ID',
        'backlog_title': 'Title & Status',
        'backlog_priority': 'Priority',
        'backlog_assignee': 'Assignee',
        'ai_score': 'AI Score',
        'actions': 'Actions',
        'loading_backlog': 'Loading backlog items...',
        'plan_sprint': 'Drag Items Here to Plan Next Sprint',
        'create_backlog_item': 'Create Backlog Item',
        'item_title': 'Item Title (Epic/Feature/Bug)',
        'item_type': 'Type',
        'feature': 'Feature',
        'epic': 'Epic',
        'bug': 'Bug',
        
        # ===== SPRINTS PAGE =====
        'project_sprints': 'Project Sprints Overview',
        'new_sprint': 'New Sprint',
        'sprint_status': 'Status',
        'sprint_name': 'Sprint Name & Duration',
        'velocity': 'Velocity',
        'ai_forecast': 'AI Forecast',
        'completed_tasks': 'Completed Tasks',
        'loading_sprints': 'Loading sprints...',
        'define_new_sprint': 'Define New Sprint',
        'sprint_name_input': 'Sprint Name',
        'start_date': 'Start Date',
        'end_date': 'End Date',
        'associate_project': 'Associate Project',
        'select_project': 'Select a project...',
        
        # ===== BOARD DASHBOARD PAGE =====
        'project_analytics': 'Project Analytics',
        'viewing_project': 'Viewing Project:',
        'active_status': 'ACTIVE',
        'avg_velocity_3': 'Avg. Velocity (Last 3 Sprints)',
        'ai_risk_index': 'AI Risk Index (FR-203)',
        'tasks_remaining': 'Tasks Remaining (In Backlog)',
        'budget_forecast': 'Budget Forecast (FR-403)',
        'sprint_burndown': 'Sprint Burndown (Active Sprint)',
        'ai_recommended_actions': 'AI Recommended Actions',
        'run_simulation': 'Run Resource Simulation (FR-507)',
        'unassigned_critical': 'Unassigned P1/P2 Tasks',
        'assign_tasks': 'Assign Tasks',
    },
    'ar': {
        # ===== NAVIGATION & COMMON =====
        'aipms': 'نظام إدارة المشاريع بالذكاء الاصطناعي',
        'ai_project_management': 'نظام إدارة المشاريع المتقدم بالذكاء الاصطناعي',
        'home': 'الرئيسية',
        'boards': 'اللوحات',
        'dashboard': 'لوحة التحكم',
        'task_board': 'لوحة المهام',
        'sprints': 'الدورات',
        'backlog': 'السجل المتراجع',
        'reports': 'التقارير',
        'chats': 'الدردشات',
        'repos': 'المستودعات',
        'settings': 'الإعدادات',
        'profile': 'الملف الشخصي',
        'logout': 'تسجيل الخروج',
        'search_placeholder': 'البحث في المهام أو المشاريع أو المستخدمين (Ctrl+K)...',
        'add_new': 'إضافة جديد',
        'notifications': 'الإشعارات',
        
        # ===== LOGIN/SIGNUP PAGE =====
        'log_in': 'تسجيل الدخول',
        'sign_up': 'إنشاء حساب',
        'username_or_email': 'اسم المستخدم أو البريد الإلكتروني',
        'password': 'كلمة المرور',
        'remember_me': 'تذكرني',
        'forgot_password': 'هل نسيت كلمة المرور؟',
        'secure_login': 'تسجيل دخول آمن',
        'or': 'أو',
        'create_account': 'إنشاء حساب AIPMS',
        'email_address': 'عنوان البريد الإلكتروني',
        'full_name': 'الاسم الكامل',
        'min_8_chars': 'الحد الأدنى 8 أحرف',
        'terms_of_service': 'شروط الخدمة',
        'agree_terms': 'بالتسجيل، فإنك توافق على',
        
        # ===== SETTINGS PAGE =====
        'settings_title': 'الإعدادات',
        'general': 'عام',
        'security': 'الأمان',
        'integrations': 'التكاملات',
        'ai_governance': 'حوكمة الذكاء الاصطناعي',
        
        # General Tab
        'general_app_settings': 'إعدادات التطبيق العامة',
        'display_preferences': 'تفضيلات العرض',
        'language': 'اللغة',
        'account_actions': 'إجراءات الحساب',
        'current_email': 'البريد الإلكتروني الحالي',
        'update_profile': 'تحديث الملف الشخصي',
        'delete_account': 'حذف الحساب',
        
        # Security Tab
        'security_role_mgmt': 'الأمان وإدارة الأدوار (للمسؤولين فقط)',
        'authentication': 'المصادقة',
        'two_factor_auth': 'المصادقة الثنائية (2FA)',
        'rbac': 'التحكم في الوصول القائم على الأدوار (FR-201)',
        'manage_user_permissions': 'إدارة أذونات المستخدم',
        'current_role': 'الدور الحالي',
        'permission': 'الإذن',
        'status': 'الحالة',
        'manage_budget': 'إدارة الميزانية (FR-403)',
        'create_projects': 'إنشاء المشاريع (FR-101)',
        'save_permissions': 'حفظ الأذونات',
        
        # Integrations Tab
        'external_tools': 'اتصالات الأدوات الخارجية',
        'connected': 'متصل',
        'disconnected': 'غير متصل',
        'disconnect': 'قطع الاتصال',
        'connect': 'اتصال',
        
        # AI Governance Tab
        'ai_model_governance': 'نموذج الذكاء الاصطناعي والحوكمة (FR-508)',
        'model_information': 'معلومات النموذج',
        'active_model_version': 'إصدار النموذج النشط',
        'last_training_date': 'تاريخ آخر تدريب',
        'ai_feature_controls': 'ضوابط ميزات الذكاء الاصطناعي',
        'enable_predictive_risk': 'تفعيل درجات المخاطر التنبؤية (FR-203)',
        'enable_sentiment_analysis': 'تفعيل تحليل المشاعر (FR-503)',
        'audit_compliance': 'التدقيق والامتثال (FR-508)',
        'ai_decisions_logged': 'يتم تسجيل جميع قرارات الذكاء الاصطناعي وتحديثات النموذج وتتبعها.',
        'export_audit_log': 'تصدير سجل تدقيق الذكاء الاصطناعي',
        
        # Notifications Tab
        'notification_channels': 'قنوات الإشعارات',
        'email_preferences': 'تفضيلات البريد الإلكتروني',
        'receive_email_alerts': 'تلقي تنبيهات البريد الإلكتروني لمهام P1',
        'slack_configuration': 'تكوين Slack (مرتبط عبر التكامل)',
        'alerts_sent_to': 'يتم إرسال التنبيهات حاليًا إلى',
        'receive_swarm_alerts': 'تلقي التنبيهات لتعيين السرب (FR-202)',
        
        # ===== HOME PAGE / DASHBOARD =====
        'calendar': 'التقويم',
        'next_deadline': 'الموعد النهائي التالي',
        'todo_list': 'قائمة المهام',
        'add_task': 'إضافة مهمة',
        'notes': 'الملاحظات',
        'team_tracker': 'متتبع الفريق',
        'summarize_updates': 'تلخيص تحديثات المشروع...',
        'generate_summary': 'إنشاء ملخص',
        'time_tracker': 'متتبع الوقت',
        'team': 'الفريق',
        'all_tasks': 'جميع المهام',
        'task_name': 'اسم المهمة',
        'assigned_to': 'مسند إلى',
        'priority': 'الأولوية',
        'due_date': 'تاريخ الاستحقاق',
        'loading': 'جاري التحميل...',
        
        # ===== BOARDS PAGE =====
        'task_board': 'لوحة المهام',
        'add_new_task': 'إضافة مهمة جديدة',
        'todo': 'قيد الانتظار',
        'in_progress': 'جاري العمل',
        'done': 'تم',
        'backlog_items': 'عناصر السجل المتراجع',
        'sprint_planning': 'تخطيط الدورة',
        'active_sprint': 'الدورة النشطة',
        'sprint_tasks': 'مهام الدورة',
        
        # ===== REPORTS PAGE =====
        'reports': 'التقارير',
        'project_summary': 'ملخص المشروع',
        'team_performance': 'أداء الفريق',
        'task_completion': 'إكمال المهمة',
        'velocity_chart': 'مخطط السرعة',
        'export_report': 'تصدير التقرير',
        
        # ===== REPOSITORIES PAGE =====
        'repositories': 'المستودعات',
        'repository_name': 'اسم المستودع',
        'last_commit': 'آخر تزامن',
        'branch': 'الفرع',
        'clone': 'استنساخ',
        
        # ===== PROFILE PAGE =====
        'my_profile': 'ملفي الشخصي',
        'user_information': 'معلومات المستخدم',
        'edit_profile': 'تعديل الملف الشخصي',
        'change_password': 'تغيير كلمة المرور',
        'save_changes': 'حفظ التغييرات',
        'cancel': 'إلغاء',
        
        # ===== BUTTONS & FORMS =====
        'save': 'حفظ',
        'submit': 'إرسال',
        'delete': 'حذف',
        'edit': 'تعديل',
        'close': 'إغلاق',
        'confirm': 'تأكيد',
        'back': 'رجوع',
        'next': 'التالي',
        'previous': 'السابق',
        'yes': 'نعم',
        'no': 'لا',
        'error': 'خطأ',
        'success': 'نجح',
        'warning': 'تحذير',
        'info': 'معلومة',
        'required_field': 'هذا الحقل مطلوب',
        'confirm_logout_message': 'هل تريد بالفعل إنهاء جلستك وتسجيل الخروج من AIPMS؟',
        
        # ===== PROFILE PAGE =====
        'performance_summary': 'ملخص الأداء (الذكاء الاصطناعي)',
        'avg_sprint_velocity': 'متوسط سرعة الدورة',
        'task_rejection_rate': 'معدل رفض المهام',
        'ai_risk_exposure': 'التعرض للمخاطر بالذكاء الاصطناعي',
        'tasks_completed': 'المهام المنجزة (هذا العام)',
        'skill_set_management': 'إدارة المهارات',
        'add_skill': 'إضافة',
        'expert': 'خبير',
        'proficient': 'ماهر',
        'familiar': 'معرفة',
        'recent_activity_log': 'سجل النشاط الحديث',
        'edit_profile': 'تعديل الملف الشخصي',
        
        # ===== REPORTS PAGE =====
        'analytics_reporting': 'مركز التحليلات والتقارير',
        'report_type': 'نوع التقرير:',
        'executive_summary': 'الملخص التنفيذي (الذكاء الاصطناعي)',
        'sprint_velocity': 'سجل سرعة الدورة',
        'predictive_risk': 'توقعات المخاطر التنبؤية',
        'root_cause_analysis': 'تحليل السبب الجذري (RCA)',
        'portfolio_view': 'عرض المحفظة',
        'export_pdf': 'تصدير PDF',
        'executive_summary_ai': 'الملخص التنفيذي (تم إنشاؤه بواسطة الذكاء الاصطناعي)',
        'select_report': 'اختر نوع التقرير والمشروع لإنشاء البيانات.',
        'generate_report': 'إنشاء التقرير',
        'velocity_chart': 'مخطط السرعة',
        'key_metrics': 'المقاييس الرئيسية وتفاصيل التحليل',
        
        # ===== CHATS PAGE =====
        'channels': 'القنوات',
        'search_chats': 'البحث في الدردشات أو المستخدمين...',
        'backend_devs': 'مطورو الواجهة الخلفية',
        'frontend_ui': 'واجهة المستخدم الأمامية',
        'ai_modeling': 'نمذجة الذكاء الاصطناعي',
        'ai_context': 'سياق الذكاء الاصطناعي',
        'channel_sentiment': 'شعور القناة',
        'neutral_low_stress': 'محايد/إجهاد منخفض',
        'avg_mood_score': 'متوسط درجة المزاج على مدار آخر 24 ساعة.',
        'linked_work_items': 'عناصر العمل المرتبطة',
        'active': 'نشط',
        'type_message': 'اكتب رسالة أو استخدم /أمر...',
        'invite_member': 'دعوة عضو',
        'view_details': 'عرض التفاصيل',
        
        # ===== REPOSITORIES PAGE =====
        'repositories_management': 'إدارة المستودعات',
        'search_repositories': 'البحث في المستودعات...',
        'new_repository': 'مستودع جديد',
        'connected_repositories': 'المستودعات المتصلة',
        'last_updated': 'آخر تحديث',
        'owner': 'المالك',
        'loading_repositories': 'جاري تحميل المستودعات...',
        'github_integration': 'تكامل GitHub',
        'connect_github': 'الاتصال بـ GitHub',
        'webhook_url': 'عنوان Webhook:',
        'copy': 'نسخ',
        'default_notifications': 'الإشعارات الافتراضية:',
        'send_new_pr': 'الإرسال على طلب سحب جديد',
        'send_merge_main': 'الإرسال عند الدمج مع الرئيسي',
        'notify_ci_failure': 'إخطار عند فشل CI',
        'slack_integration': 'تكامل Slack',
        'manage_slack': 'إدارة إشعارات Slack في',
        
        # ===== BOARD / KANBAN PAGE =====
        'kanban_board': 'لوحة Kanban',
        'quick_create_task': 'إنشاء مهمة سريع',
        'under_review': 'قيد المراجعة',
        'medium': 'متوسط',
        'high': 'عالي',
        'low': 'منخفض',
        'description': 'الوصف',
        'assignee': 'مسند إلى',
        'create_task': 'إنشاء مهمة',
        
        # ===== BACKLOG PAGE =====
        'backlog_prioritization': 'السجل المتراجع للمشروع والأولويات',
        'sort_by': 'ترتيب حسب:',
        'ai_priority_score': 'درجة أولوية الذكاء الاصطناعي (تنازلي)',
        'manual_priority': 'الأولوية اليدوية (تنازلي)',
        'creation_date': 'تاريخ الإنشاء (تصاعدي)',
        'add_backlog_item': 'إضافة عنصر إلى السجل',
        'backlog_id': 'المعرّف',
        'backlog_title': 'العنوان والحالة',
        'backlog_priority': 'الأولوية',
        'backlog_assignee': 'مسند إلى',
        'ai_score': 'درجة الذكاء الاصطناعي',
        'actions': 'الإجراءات',
        'loading_backlog': 'جاري تحميل عناصر السجل...',
        'plan_sprint': 'اسحب العناصر هنا لتخطيط الدورة التالية',
        'create_backlog_item': 'إنشاء عنصر في السجل',
        'item_title': 'عنوان العنصر (ميزة/ملحمة/خطأ)',
        'item_type': 'النوع',
        'feature': 'ميزة',
        'epic': 'ملحمة',
        'bug': 'خطأ',
        
        # ===== SPRINTS PAGE =====
        'project_sprints': 'نظرة عامة على دورات المشروع',
        'new_sprint': 'دورة جديدة',
        'sprint_status': 'الحالة',
        'sprint_name': 'اسم الدورة والمدة',
        'velocity': 'السرعة',
        'ai_forecast': 'توقع الذكاء الاصطناعي',
        'completed_tasks': 'المهام المنجزة',
        'loading_sprints': 'جاري تحميل الدورات...',
        'define_new_sprint': 'تحديد دورة جديدة',
        'sprint_name_input': 'اسم الدورة',
        'start_date': 'تاريخ البداية',
        'end_date': 'تاريخ النهاية',
        'associate_project': 'ربط المشروع',
        'select_project': 'اختر مشروعاً...',
        
        # ===== BOARD DASHBOARD PAGE =====
        'project_analytics': 'تحليلات المشروع',
        'viewing_project': 'عرض المشروع:',
        'active_status': 'نشط',
        'avg_velocity_3': 'متوسط السرعة (آخر 3 دورات)',
        'ai_risk_index': 'مؤشر مخاطر الذكاء الاصطناعي (FR-203)',
        'tasks_remaining': 'المهام المتبقية (في السجل)',
        'budget_forecast': 'توقع الميزانية (FR-403)',
        'sprint_burndown': 'مخطط احتراق الدورة (الدورة النشطة)',
        'ai_recommended_actions': 'الإجراءات الموصى بها من الذكاء الاصطناعي',
        'run_simulation': 'تشغيل محاكاة الموارد (FR-507)',
        'unassigned_critical': 'المهام الحرجة غير المسندة P1/P2',
        'assign_tasks': 'إسناد المهام',
    }
}

def get_locale():
    """Get current language from session or default to 'en'"""
    return session.get('language', 'en')

def get_translations():
    """Get translations for current language"""
    lang = get_locale()
    return translations.get(lang, translations['en'])

class TranslationProxy:
    """Allows access to translations using dot notation: t.settings_title"""
    def __init__(self, translations_dict):
        self._translations = translations_dict
    
    def __getattr__(self, key):
        return self._translations.get(key, key)
    
    def __getitem__(self, key):
        return self._translations.get(key, key)

def get_t():
    """Returns a translation proxy object for template use"""
    return TranslationProxy(get_translations())